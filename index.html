<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interact Jaipur</title>
</head>
<body>
    <div class="container">
        <h1>Interact Jaipur</h1>
        
        <div class="controls">
            <div class="control-group">
                <label for="radiusSlider">Area (Radius)</label>
                <input type="range" id="radiusSlider" class="slider" min="20" max="150" value="60" step="5">
                <span class="radius-value" id="radiusDisplay">2.0 km</span>
            </div>
        </div>
        
        <div class="main-content">
            <div class="map-container">
                <svg id="map-svg" viewBox="0 0 800 600">
                    
                    <g class="background-boundaries">
                        
                        <path class="background-map" d="M 80,120 Q 120,80 180,90 L 280,75 Q 350,70 420,85 L 520,95 Q 580,105 620,140 L 680,180 Q 720,220 730,280 L 740,340 Q 735,400 710,450 L 680,500 Q 640,540 580,555 L 520,565 Q 460,570 400,565 L 340,560 Q 280,555 230,540 L 180,520 Q 130,490 100,450 L 85,400 Q 75,350 80,300 L 85,250 Q 90,200 80,120 Z"/>
                        
                        <g class="road-network" opacity="0.4">
                            <!-- Ring Road -->
                            <ellipse cx="400" cy="300" rx="280" ry="200" stroke="#444" stroke-width="2" fill="none"/>
                            
                            <!-- Major Highways -->
                            <line x1="120" y1="300" x2="680" y2="300" stroke="#444" stroke-width="2"/> <!-- Ajmer Road -->
                            <line x1="400" y1="120" x2="400" y2="480" stroke="#444" stroke-width="2"/> <!-- Tonk Road -->
                            <line x1="180" y1="180" x2="620" y2="420" stroke="#444" stroke-width="2"/> <!-- Delhi Road -->
                            <line x1="220" y1="420" x2="580" y2="180" stroke="#444" stroke-width="2"/> <!-- Agra Road -->
                            
                            <!-- Secondary Roads -->
                            <line x1="250" y1="150" x2="550" y2="450" stroke="#666" stroke-width="1"/>
                            <line x1="150" y1="350" x2="650" y2="250" stroke="#666" stroke-width="1"/>
                            <line x1="320" y1="120" x2="480" y2="480" stroke="#666" stroke-width="1"/>
                            <line x1="150" y1="250" x2="650" y2="350" stroke="#666" stroke-width="1"/>
                        </g>
                    </g>
                    
                    <g class="district-regions">
                        <!-- Pink City -->
                        <polygon points="350,250 410,250 410,310 350,310" class="district-area" data-district="0"/>
                        
                        <!-- Civil Lines -->
                        <polygon points="330,180 390,180 390,240 330,240" class="district-area" data-district="1"/>
                        
                        <!-- Malviya Nagar -->
                        <polygon points="390,370 450,370 450,430 390,430" class="district-area" data-district="2"/>
                        
                        <!-- Vaishali Nagar -->
                        <polygon points="220,250 280,250 280,310 220,310" class="district-area" data-district="3"/>
                        
                        <!-- Mansarovar -->
                        <polygon points="290,320 350,320 350,380 290,380" class="district-area" data-district="4"/>
                        
                        <!-- Jagatpura -->
                        <polygon points="470,350 530,350 530,410 470,410" class="district-area" data-district="5"/>
                        
                        <!-- Sanganer -->
                        <polygon points="350,420 410,420 410,480 350,480" class="district-area" data-district="6"/>
                        
                        <!-- Jhotwara -->
                        <polygon points="290,120 350,120 350,180 290,180" class="district-area" data-district="7"/>
                        
                        <!-- C-Scheme -->
                        <polygon points="310,230 370,230 370,290 310,290" class="district-area" data-district="8"/>
                        
                        <!-- Bani Park -->
                        <polygon points="270,170 330,170 330,230 270,230" class="district-area" data-district="9"/>
                        
                        <!-- Shyam Nagar -->
                        <polygon points="170,220 230,220 230,280 170,280" class="district-area" data-district="10"/>
                        
                        <!-- Sodala -->
                        <polygon points="450,250 510,250 510,310 450,310" class="district-area" data-district="11"/>
                        
                        <!-- Chitrakoot -->
                        <polygon points="470,320 530,320 530,380 470,380" class="district-area" data-district="12"/>
                        
                        <!-- Tonk Road Area -->
                        <polygon points="420,290 480,290 480,350 420,350" class="district-area" data-district="13"/>
                        
                        <!-- Ajmer Road Area -->
                        <polygon points="250,290 310,290 310,350 250,350" class="district-area" data-district="14"/>
                        
                        <!-- Durgapura -->
                        <polygon points="350,320 410,320 410,380 350,380" class="district-area" data-district="15"/>
                        
                        <!-- Gopalpura -->
                        <polygon points="410,320 470,320 470,380 410,380" class="district-area" data-district="16"/>
                        
                        <!-- Pratap Nagar -->
                        <polygon points="220,320 280,320 280,380 220,380" class="district-area" data-district="17"/>
                        
                        <!-- Sitapura -->
                        <polygon points="530,350 590,350 590,410 530,410" class="district-area" data-district="18"/>
                        
                        <!-- Bapu Nagar -->
                        <polygon points="290,250 350,250 350,310 290,310" class="district-area" data-district="19"/>
                        
                        <!-- Kalwar Road -->
                        <polygon points="170,150 230,150 230,210 170,210" class="district-area" data-district="20"/>
                        
                        <!-- Murlipura -->
                        <polygon points="510,180 570,180 570,240 510,240" class="district-area" data-district="21"/>
                        
                        <!-- Kardhani -->
                        <polygon points="410,380 470,380 470,440 410,440" class="district-area" data-district="22"/>
                        
                        <!-- Kukas -->
                        <polygon points="450,120 510,120 510,180 450,180" class="district-area" data-district="23"/>
                        
                        <!-- Bassi -->
                        <polygon points="590,320 650,320 650,380 590,380" class="district-area" data-district="24"/>
                        
                        <!-- Chomu -->
                        <polygon points="350,120 410,120 410,180 350,180" class="district-area" data-district="25"/>
                        
                        <!-- Shahpura -->
                        <polygon points="530,250 590,250 590,310 530,310" class="district-area" data-district="26"/>
                        
                        <!-- Vidhyadhar Nagar -->
                        <polygon points="410,180 470,180 470,240 410,240" class="district-area" data-district="27"/>
                        
                        <!-- Raja Park -->
                        <polygon points="330,240 390,240 390,300 330,300" class="district-area" data-district="28"/>
                        
                        <!-- Hathroi -->
                        <polygon points="170,280 230,280 230,340 170,340" class="district-area" data-district="29"/>
                    </g>
                    
                    <circle id="cursor-circle" cx="400" cy="300" r="60" class="cursor-circle" style="display: none;"/>
                </svg>
            </div>
            
            <div class="stats-panel">
                <h3>Live Statistics</h3>
                <div class="info-item">
                    <div class="info-label">Current Suburb</div>
                    <div class="info-value current-suburb" id="suburbDisplay">Move cursor over map</div>
                </div>
                <div class="info-item">
                    <div class="info-label">Population in Radius</div>
                    <div class="info-value" id="populationDisplay">--</div>
                </div>
                <div class="info-item">
                    <div class="info-label">Average Income per Capita</div>
                    <div class="info-value" id="incomeDisplay">₹ --</div>
                </div>
                <div class="info-item">
                    <div class="info-label">Population Density</div>
                    <div class="info-value" id="densityDisplay">-- per km²</div>
                </div>
            </div>
        </div>
        
        <div class="description-section">
            <h2 class="description-title">What is Interact Jaipur?</h2>
            <div class="description-content">
                <div class="description-text">
                    The Jaipur Interactive Map was developed as a prototype-based web data visualization tool to provide real-time demographic and economic insights for different areas of Jaipur city. This interactive platform allows users to explore population density, income distribution, and other key statistics by simply hovering over different neighborhoods and adjusting the analysis radius.
                </div>
                <div class="description-images">
                    <img src="https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=400" alt="Hawa Mahal, Jaipur" />
                    <img src="https://images.unsplash.com/photo-1599661046827-dacde1bb10c6?w=400" alt="City Palace, Jaipur" />
                    <img src="https://images.unsplash.com/photo-1580074049925-d4d8e1f49e95?w=400" alt="Amber Fort, Jaipur" />
                    <img src="https://images.unsplash.com/photo-1606041011872-596597976b25?w=400" alt="Jaipur Architecture" />
                </div>
            </div>
        </div>
        
        <div class="tooltip" id="tooltip"></div>
        
        <div class="footer">
            <p>Made with love by 
                <a href="https://www.linkedin.com/in/adtyapnda/">Aditya Panda</a>, 
                <a href="https://www.linkedin.com/in/iha-singh-962854226/">Iha Singh</a>, 
                <a href="https://www.linkedin.com/in/sagar-singh-842a712a2/">and Sagar Singh</a>
            </p>
        </div>
    </div>

    <script>
        const jaipurDistricts = [
            { name: "Pink City (Walled City)", population: 85000, incomePerCapita: 180000, density: 45000 },
            { name: "Civil Lines", population: 120000, incomePerCapita: 320000, density: 28000 },
            { name: "Malviya Nagar", population: 180000, incomePerCapita: 250000, density: 35000 },
            { name: "Vaishali Nagar", population: 210000, incomePerCapita: 280000, density: 42000 },
            { name: "Mansarovar", population: 195000, incomePerCapita: 220000, density: 38000 },
            { name: "Jagatpura", population: 160000, incomePerCapita: 200000, density: 32000 },
            { name: "Sanganer", population: 140000, incomePerCapita: 170000, density: 29000 },
            { name: "Jhotwara", population: 130000, incomePerCapita: 160000, density: 31000 },
            { name: "C-Scheme", population: 95000, incomePerCapita: 350000, density: 25000 },
            { name: "Bani Park", population: 105000, incomePerCapita: 240000, density: 27000 },
            { name: "Shyam Nagar", population: 125000, incomePerCapita: 175000, density: 33000 },
            { name: "Sodala", population: 88000, incomePerCapita: 205000, density: 24000 },
            { name: "Chitrakoot", population: 115000, incomePerCapita: 195000, density: 30000 },
            { name: "Tonk Road Area", population: 110000, incomePerCapita: 190000, density: 28500 },
            { name: "Ajmer Road Area", population: 145000, incomePerCapita: 185000, density: 36000 },
            { name: "Durgapura", population: 98000, incomePerCapita: 165000, density: 26000 },
            { name: "Gopalpura", population: 92000, incomePerCapita: 210000, density: 25500 },
            { name: "Pratap Nagar", population: 135000, incomePerCapita: 155000, density: 34000 },
            { name: "Sitapura", population: 78000, incomePerCapita: 145000, density: 22000 },
            { name: "Bapu Nagar", population: 102000, incomePerCapita: 172000, density: 27500 },
            { name: "Kalwar Road", population: 65000, incomePerCapita: 138000, density: 19000 },
            { name: "Murlipura", population: 73000, incomePerCapita: 152000, density: 21000 },
            { name: "Kardhani", population: 84000, incomePerCapita: 148000, density: 23500 },
            { name: "Kukas", population: 56000, incomePerCapita: 162000, density: 16000 },
            { name: "Bassi", population: 42000, incomePerCapita: 134000, density: 14000 },
            { name: "Chomu", population: 68000, incomePerCapita: 142000, density: 18500 },
            { name: "Shahpura", population: 75000, incomePerCapita: 156000, density: 20500 },
            { name: "Vidhyadhar Nagar", population: 112000, incomePerCapita: 198000, density: 29000 },
            { name: "Raja Park", population: 108000, incomePerCapita: 225000, density: 28000 },
            { name: "Hathroi", population: 89000, incomePerCapita: 168000, density: 24500 }
        ];

        const svg = document.getElementById('map-svg');
        const cursorCircle = document.getElementById('cursor-circle');
        const radiusSlider = document.getElementById('radiusSlider');
        const radiusDisplay = document.getElementById('radiusDisplay');
        const tooltip = document.getElementById('tooltip');

        let currentRadius = 60;
        let currentSuburb = null;

        function svgToKm(svgUnits) {
            return (svgUnits * 0.033).toFixed(1);
        }

        function updateRadiusDisplay() {
            radiusDisplay.textContent = svgToKm(currentRadius) + ' km';
        }

        radiusSlider.addEventListener('input', function() {
            currentRadius = parseInt(this.value);
            cursorCircle.setAttribute('r', currentRadius);
            updateRadiusDisplay();
        });

        function pointInPolygon(x, y, polygon) {
            let inside = false;
            for (let i = 0, j = polygon.length - 1; i < polygon.length; j = i++) {
                if (((polygon[i][1] > y) !== (polygon[j][1] > y)) &&
                    (x < (polygon[j][0] - polygon[i][0]) * (y - polygon[i][1]) / (polygon[j][1] - polygon[i][1]) + polygon[i][0])) {
                    inside = !inside;
                }
            }
            return inside;
        }

        function getPolygonPoints(element) {
            const points = element.getAttribute('points').split(' ');
            return points.map(point => {
                const [x, y] = point.split(',');
                return [parseFloat(x), parseFloat(y)];
            });
        }

        function findCurrentDistrict(x, y) {
            const districtElements = document.querySelectorAll('.district-area');
            for (let i = 0; i < districtElements.length; i++) {
                const element = districtElements[i];
                const points = getPolygonPoints(element);
                if (pointInPolygon(x, y, points)) {
                    return parseInt(element.getAttribute('data-district'));
                }
            }
            return null;
        }

        function getDistance(x1, y1, x2, y2) {
            return Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2));
        }

        function getPolygonCenter(points) {
            let x = 0, y = 0;
            for (let point of points) {
                x += point[0];
                y += point[1];
            }
            return [x / points.length, y / points.length];
        }

        function calculateStats(centerX, centerY, radius) {
            let totalPopulation = 0;
            let totalIncome = 0;
            let totalWeight = 0;
            let avgDensity = 0;
            let districtCount = 0;

            const districtElements = document.querySelectorAll('.district-area');
            
            for (let i = 0; i < districtElements.length; i++) {
                const element = districtElements[i];
                const points = getPolygonPoints(element);
                const [districtX, districtY] = getPolygonCenter(points);
                const distance = getDistance(centerX, centerY, districtX, districtY);
                
                if (distance <= radius) {
                    const overlapFactor = Math.max(0, 1 - (distance / radius));
                    const district = jaipurDistricts[i];
                    const effectivePopulation = district.population * overlapFactor;
                    
                    totalPopulation += effectivePopulation;
                    totalIncome += district.incomePerCapita * effectivePopulation;
                    totalWeight += effectivePopulation;
                    avgDensity += district.density * overlapFactor;
                    
                    if (overlapFactor > 0.1) {
                        districtCount++;
                    }
                }
            }

            const avgIncome = totalWeight > 0 ? totalIncome / totalWeight : 0;
            const weightedDensity = districtCount > 0 ? avgDensity / districtCount : 0;

            return {
                population: Math.round(totalPopulation),
                avgIncome: Math.round(avgIncome),
                density: Math.round(weightedDensity)
            };
        }

        svg.addEventListener('mousemove', function(e) {
            const rect = svg.getBoundingClientRect();
            const scaleX = 800 / rect.width;
            const scaleY = 600 / rect.height;
            
            const x = (e.clientX - rect.left) * scaleX;
            const y = (e.clientY - rect.top) * scaleY;

            cursorCircle.style.display = 'block';
            cursorCircle.setAttribute('cx', x);
            cursorCircle.setAttribute('cy', y);

            const districtIndex = findCurrentDistrict(x, y);
            if (districtIndex !== null && districtIndex !== currentSuburb) {
                currentSuburb = districtIndex;
                document.getElementById('suburbDisplay').textContent = jaipurDistricts[districtIndex].name;
            } else if (districtIndex === null) {
                document.getElementById('suburbDisplay').textContent = 'Outside mapped area';
            }

            const stats = calculateStats(x, y, currentRadius);
            
            document.getElementById('populationDisplay').textContent = 
                stats.population.toLocaleString('en-IN');
            document.getElementById('incomeDisplay').textContent = 
                '₹ ' + stats.avgIncome.toLocaleString('en-IN');
            document.getElementById('densityDisplay').textContent = 
                stats.density.toLocaleString('en-IN') + ' per km²';
        });

        svg.addEventListener('mouseleave', function() {
            cursorCircle.style.display = 'none';
            currentSuburb = null;
            
            document.getElementById('suburbDisplay').textContent = 'Move cursor over map';
            document.getElementById('populationDisplay').textContent = '--';
            document.getElementById('incomeDisplay').textContent = '₹ --';
            document.getElementById('densityDisplay').textContent = '-- per km²';
        });

        updateRadiusDisplay();
    </script>
</body>
</html>
